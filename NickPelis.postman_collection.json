{
  "info": {
    "name": "NickPelis API",
    "description": "Colección Postman para probar la API NickPelis (Películas, Géneros, Actores, Comentarios y Usuarios con autenticación JWT).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Autenticación",
      "item": [
        {
          "name": "Registro usuario",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Usuario Demo\",\n  \"correo\": \"demo@mail.com\",\n  \"contrasena\": \"Demo123*\"\n}"
            },
            "url": "http://localhost:5000/auth/registro"
          }
        },
        {
          "name": "Iniciar sesión",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"correo\": \"admin@nickpelis.com\",\n  \"contrasena\": \"Admin123*\"\n}"
            },
            "url": "http://localhost:5000/auth/iniciar_sesion"
          }
        },
        {
          "name": "Refrescar token",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{refresh_token}}" }],
            "url": "http://localhost:5000/auth/refrescar"
          }
        },
        {
          "name": "Desconectar",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/auth/desconectar"
          }
        }
      ]
    },
    {
      "name": "Películas",
      "item": [
        {
          "name": "Listar todas",
          "request": { "method": "GET", "url": "http://localhost:5000/api/peliculas" }
        },
        {
          "name": "Listar destacadas",
          "request": { "method": "GET", "url": "http://localhost:5000/api/peliculas?destacadas=true" }
        },
        {
          "name": "Buscar por texto",
          "request": { "method": "GET", "url": "http://localhost:5000/api/peliculas?q=shrek" }
        },
        {
          "name": "Obtener por ID",
          "request": { "method": "GET", "url": "http://localhost:5000/api/peliculas/1" }
        },
        {
          "name": "Crear película",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "nombre", "value": "Pelicula Demo", "type": "text" },
                { "key": "anio", "value": "2025", "type": "text" },
                { "key": "puntuacion", "value": "7.5", "type": "text" },
                { "key": "duracion", "value": "120", "type": "text" },
                { "key": "sinopsis", "value": "Una película de prueba.", "type": "text" },
                { "key": "generos", "value": "10751", "type": "text" },
                { "key": "actores", "value": "1", "type": "text" },
                { "key": "poster", "type": "file" },
                { "key": "banner", "type": "file" }
              ]
            },
            "url": "http://localhost:5000/api/peliculas"
          }
        },
        {
          "name": "Actualizar película",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "nombre", "value": "Pelicula Demo Actualizada", "type": "text" },
                { "key": "anio", "value": "2026", "type": "text" }
              ]
            },
            "url": "http://localhost:5000/api/peliculas/1"
          }
        },
        {
          "name": "Eliminar película",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/peliculas/1"
          }
        }
      ]
    },
    {
      "name": "Comentarios",
      "item": [
        {
          "name": "Listar comentarios de película",
          "request": { "method": "GET", "url": "http://localhost:5000/api/peliculas/1/comentarios" }
        },
        {
          "name": "Crear comentario",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"contenido\": \"Excelente película\",\n  \"calificacion\": 5\n}" },
            "url": "http://localhost:5000/api/peliculas/1/comentarios"
          }
        },
        {
          "name": "Actualizar comentario",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contenido\": \"Comentario actualizado\"\n}"
            },
            "url": "http://localhost:5000/comentarios/1"
          }
        },
        {
          "name": "Eliminar comentario",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "http://localhost:5000/comentarios/1"
          }
        }
      ]
    },
    {
      "name": "Géneros",
      "item": [
        {
          "name": "Listar géneros",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/generos"
          }
        },
        {
          "name": "Obtener género por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/generos/10751"
          }
        },
        {
          "name": "Crear género",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nombre\": \"Nuevo Género\"\n}" },
            "url": "http://localhost:5000/api/generos"
          }
        },
        {
          "name": "Actualizar género",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nombre\": \"Género Actualizado\"\n}" },
            "url": "http://localhost:5000/api/generos/10751"
          }
        },
        {
          "name": "Eliminar género",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/generos/10751"
          }
        }
      ]
    },
    {
      "name": "Actores",
      "item": [
        {
          "name": "Listar actores",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/actores"
          }
        },
        {
          "name": "Obtener actor por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/actores/1"
          }
        },
        {
          "name": "Crear actor",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nombre\": \"Nuevo Actor\"\n}" },
            "url": "http://localhost:5000/api/actores"
          }
        },
        {
          "name": "Actualizar actor",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nombre\": \"Actor Actualizado\"\n}" },
            "url": "http://localhost:5000/api/actores/1"
          }
        },
        {
          "name": "Eliminar actor",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/actores/1"
          }
        }
      ]
    },
    {
      "name": "Usuarios",
      "item": [
        {
          "name": "Listar usuarios (admin)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/usuarios"
          }
        },
        {
          "name": "Crear usuario admin",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nombre\": \"Nuevo Admin\",\n  \"correo\": \"nuevo@admin.com\",\n  \"contrasena\": \"Admin123*\",\n  \"rol\": \"ADMIN\"\n}" },
            "url": "http://localhost:5000/api/usuarios"
          }
        },
        {
          "name": "Ver mi perfil",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{access_token}}" }],
            "url": "http://localhost:5000/api/me"
          }
        },
        {
          "name": "Actualizar mi perfil",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nombre\": \"Usuario Actualizado\"\n}" },
            "url": "http://localhost:5000/api/me"
          }
        }
      ]
    },
    {
      "name": "Favoritos",
      "item": [
        {
          "name": "Listar favoritos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "http://localhost:5000/favoritas"
          }
        },
        {
          "name": "Agregar favorito",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_pelicula\": 1\n}"
            },
            "url": "http://localhost:5000/favoritas"
          }
        },
        {
          "name": "Eliminar favorito",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "http://localhost:5000/favoritas/1"
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "access_token", "value": "" },
    { "key": "refresh_token", "value": "" }
  ]
}
